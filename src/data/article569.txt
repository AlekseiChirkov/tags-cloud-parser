Автор: AlexanderSkorniakov
Дата: 2021-09-28T07:08:30.000Z
Название: Варим суп из стали: оптимизация логистики ковшей и как устроен цех КЦ
№ 2
Теги: Блог компании Группа НЛМК, Анализ и проектирование систем *,
Промышленное программирование *, Управление проектами *
Текст:
Привет из конвертерного цеха металлургического комбината! Смотрите, у
нас тут есть вот такой суп в ковше, стоящем на сталевозе:   Таких
ковшей на 320 тонн стали в цехе 40 штук, и они медленно остывают. Этой
стали грустно и одиноко, она подмерзает. Через эти ковши проходит 10
миллионов тонн стали в год, это 14% стали России   На входе в цех у
нас жидкий чугун и металлолом, на выходе надо получить сляб — большой
слиток стали. Контур системы диспетчеризации «Гефест» начинается с
конвертера, где мы продуваем чугун кислородом, таким образом окисляем
и удаляем ненужные нам примеси. После конвертера получается «стальной
бульон» для супа, в который уже можно добавлять основные ингредиенты,
чтобы получались разные марки стали. За смену мы выплавляем несколько
заказов, и каждая сталь требует своего рецепта — это разные добавки,
разные техпроцессы, разные температуры и разные последовательности
действий.    На участке аргонной установки   Узким местом, в
зависимости от сорта стали, может стать любой технологический узел на
пути плавки от конвертера до разливки — агрегаты внепечной обработки,
мостовые краны или сталевозы для перемещения ковшей могут оказаться в
какой-то конкретный момент перегружены. Раньше графики
последовательности действий составлялись в блокноте человеком и были
недостаточно оптимизированы. Плюс непредсказуемость: графики с
довольно широкими временными границами дают большие потери
производительности, а графики с узкими границами — не дают
прореагировать на возможную поломку, задержку в процессе или
вынужденную остановку. Не знаю, сколько стоит у вас простой прода, но
у нас один остывший не к месту ковш запросто может нанести ущерба на
несколько миллионов рублей.    В общем, мы написали систему, которая
не только оптимизирует загрузку этого участка производства, но и
регулярно (во время смены) пересчитывает всю логистику ковшей.   Но
давайте начну с, собственно, рассказа про то, что же именно
оптимизируется в цехе.    Слева — установка печь-ковш, впереди —
подход к трайб-аппарату  Как устроен цех  Идею конвертерного
производства стали я примерно описал выше. На входе у нас чугун,
который выплавляется в доменной печи, и лом чермета. На конвертерный
участок он поступает всё ещё в жидком виде и заливается в конвертер
(после завалки туда лома).    Конвертер достаточно хорошо
автоматизирован. Поскольку химический состав сырья варьируется, у него
есть датчики, позволяющие примерно понять, что происходит внутри и
выбрать верный температурный режим, режим окисления и так далее. В
конвертере чугун продувается кислородом, что даёт его разогрев до
температуры 1600+ градусов Цельсия, окисление кремния, марганца и
углерода. Полученные оксиды удаляются из расплава, и на выходе
получается жидкий металл в объёме ковша (плавка) — то, что позже
станет сталью определённой марки.    Конвертеров у нас три штуки, они
могут подавать «бульон» в любое время и по заданному расписанию. При
этом если процесс окисления запущен, мы не можем его остановить, в
любом случае на выходе примерно через 40 минут получится ковш
расплава, с которым надо будет что-то делать.    Выглядит он вот так:
А так выглядит проба металла (остывшая), которую берут из ковша на
агрегате внепечной обработки. На длинной ручке, которой эту пробу
берут, на конце есть ёмкость такой формы, как этот застывший образец.
Там разрежённая среда, и в эту форму засасывается жидкий металл, а
сама форма сгорает.     На данной фотографии ковш перемещается по цеху
на мостовом кране. Кранов у нас 10 штук, они вот такие:   Лебёдка
мостового крана   Здесь хорошо видно ещё одно ограничение логистики:
мостовой кран может двигаться по цеху по своим направляющим только в
диапазоне от одного крана до другого, а не полностью независимо. Краны
управляются из кабин:     Итак, вы получаете ковш с жидким металлом.
Далее его нужно перемещать по цеху, чтобы в зависимости от сорта
изготавливаемого металла, тем или иным образом обработать плавку —
довести до нужной температуры, добавить примеси (флюсы и/или
ферросплавы) и некоторое время перемешивать при определённой
температуре.      Чем меньше отклонение реального процесса от
нормативного времени обработки плавки, тем меньше нужно тратить
ресурсов (в частности, электроэнергии) на производство. У каждого
ковша есть критическая температура (температура ликвидуса), после
снижения до которой расплав становится непригоден для дальнейшей
разливки. Плавку в такой ситуации надо догревать. Как мы говорим —
сталь мёрзнет. Лучший способ её догреть — это опустить в неё
графитированные электроды и включить ток (в конвертер ничего не
возвращается). Стендов с электродами (установки печь-ковш) всего два.
Они вот такие:     При плотном графике каждый внеплановый догрев
означает распространение волны опозданий дальше по очереди. Кроме
того, графитированные электроды сами по себе довольно дорогие, и
каждый такой догрев — это рост себестоимости конечного продукта.
Поэтому наш сервис и работает на то, чтобы не дать стали замёрзнуть.
Разливщик стали берёт пробу металла на установке печь-ковш (УПК)
Агрегатов в конвертерном цехе 8 штук, мы двигаем ковши между ними,
часто оставляем в них на N минут. Между конвертером, например, в
вакууматоре и на других узлах сталь может провести 20 минут, может 40
— зависит от задачи (как именно нужно обработать плавку, чтобы
получить заказанную марку стали) и начальных условий.    Перенос
теплоизолирующей засыпки   В конце цеха сталь попадает в одну из УНРС
— установку непрерывной разливки стали.   Это вид сверху на одну из
наших УНРС. Мы видим два стенда для установки стальковшей. Сталь из
ковша слева, который с крышкой, уже почти разлилась, через пару минут
там останется один шлак. Ковш справа только что был поставлен краном,
он полный, его разливка начнётся сразу, как иссякнет сталь в левом
ковше. Как уже говорилось, крайне важно, чтобы поток стали в УНРС не
прерывался   Установка доводки металла   Ключевое слово «непрерывной»:
в эти установки должны попадать ковши с правильно подготовленным
«супом» без остановок. То есть УНРС имеет небольшой буфер (примерно на
2 минуты), и если выйти за него, то разливка прервётся. Прерывание
разливки — это большой финансовый убыток, и эту ситуацию допускать ни
в коем случае нельзя. Напоминаю, если мы формируем очередь перед УНРС,
то сталь в ковшах остывает, поэтому всё нужно точно вовремя. Мы можем
варьировать скорость разливки, но в небольших пределах.    Вот
принципиальная схема цеха:     На этой стадии может показаться, что
задача сводится к формированию оптимальных очередей на агрегаты цеха и
догрев того, что в эти очереди не умещается. Добавляем новые уровни
сложности:    Слишком высокая или слишком низкая температура не даст
нам разлить сталь в слябы.  Сталь, которую мы догреваем либо по
техпроцессу, либо просто потому, что пропустили оптимальный момент,
дополнительно окисляется при нагреве. Чтобы сохранить химический
состав, её надо раскислять алюминием. Его в виде проволоки вводят в
расплав. Проволока, электроэнергия, электроды — это дополнительные
затраты. Эти затраты можно посчитать.  Ковш, который менял температуру
несколько раз, создаёт повышенную вероятность брака, включая скрытые
раковины в будущем слябе. Это означает, что сляб нельзя будет пускать
в прокат — придётся переплавлять его заново. Средств для
транспортировки по цеху ковшей со сталью, а именно сталевозов и
кранов, ограниченное количество.  Процессы в зависимости от
конкретного химического состава стали и входящих температурных условий
занимают только примерно предсказуемое время: на самом же деле выход
из графика случается почти всегда, потому что погрешности в разных
местах могут как компенсировать друг друга, так и накапливаться
однонаправленно. Если не успеть подать ковш к УНРС, то образуется
концевой слиток — например, половинка или треть, то есть неправильной
формы и неправильного тоннажа, затем машина нештатно остановится.
Запускать её заново — это долгий процесс, который означает мгновенное
перераспределение очереди в цехе и просто гигантские потери.
Прерывание серии по факту происходит редко, по-хорошему — только в
исключительных случаях при аварии или нарушении ТБ, а никак не по
причине плохого планирования.    В итоге вы получаете ситуацию, когда
в цехе постоянно решается задача, как оптимально выпускать сталь из
конвертеров и обрабатывать её на различных агрегатах, чтобы выдержать
все серии на УНРС.    Алюминиевая проволока для раскисления стали
Более широкая задача  Может показаться, что можно один раз подобрать
набор оптимальных режимов загрузки узлов производства и придерживаться
его. К сожалению, это работало бы только в той ситуации, если бы мы
могли производить примерно одинаковый набор сталей — или если бы мы
делали очень длинные серии в больших заказах. На практике гибкость на
нашем участке производства означает некоторые потери в оптимальности
процесса, но эти потери куда меньше, чем выигрыш за счёт гибкости
производства в целом.    Проще говоря, каждый день нам нужно лить
разные заказы — несколько разных сталей, каждая из которых имеет свой
процесс и свой «рецепт супа».    Заказы поступают примерно за две-три
недели в систему более высокого уровня, где кластеризуются,
группируются, дефрагментируются и спускаются в цех в виде суточных
планов.   На основе отобранных для исполнения в данные сутки заказов
начальник отдела планирования составляет суточное задание по загрузке
УНРС, что-то вроде следующего: «с 12 до 15 на такой-то машине мы
разливаем такую-то серию, переналаживаем 2 часа, затем с 17 до 22
разливаем следующую серию, переналаживаем, затем с полуночи до 4 утра
третью». На каждую из пяти разных установок может быть запланировано
несколько серий, отличающихся по продолжительности. Кроме серий на
УНРС, ему необходимо запланировать работу конвертеров. Эта задача,
вообще-то, требует расчёта, особенно в случае большого количества
разноплановых заказов. Но до сих пор она решалась на опыте и
профессиональном чутье специалиста вручную. Сейчас же он имеет
возможность создать несколько сценариев, комбинируя разное время
запуска разных серий и пробуя сочетания. Лучший план из полученных
отправляется в работу.   После того, как начальник смены составит
такой верхнеуровневый план на сутки, он уходит в диспетчерскую службу
цеха, где начальник смены составляет более подробный план с учётом
всех промежуточных агрегатов. Раньше, опять же, специалист вручную
рассчитывал такие планы. Точнее, на самом деле, конечно, этот процесс
автоматизировался, но всё равно у систем автоматизации не было
возможности пересчитывать график в реальном времени в зависимости от
положения и статуса каждого ковша, то есть он составлялся один или два
раза в смену. Сейчас мы сделали систему, которая может пересчитывать
оптимальные графики постоянно. При выходе ситуации за план, он
пересчитывается.    Итак, есть книга заказов, в которой указываются
заказы, которые производство должно поставить. Часть заказов из этой
книги попадают в конкретную смену, где оптимизируются в рамках
производственного участка тактически. Каждый заказ — это серия
разливки. Мы поднимаемся от разливки к конвертерам и прописываем, что
будет происходить в какое время и на какой установке, и каким образом
туда будут попадать ковши. Это делает начальник отдела по планированию
производства.    Бывают смены, когда серии попадаются очень длинные, и
все сутки участок работает по одному маршруту. Это облегчение для
всех, и это упрощает задачу. Но чаще марки стали разные.    Система
планирования в её текущей реализации работает исходя из того, что
чугун приходит к нам в необходимом количестве и в те моменты, когда
нужно загружать конвертеры. С этим тоже есть нюансы, но включение
техпроцессов предыдущих переделов пока оставили в развитии, это
отдельный и сложный вопрос.    Некоторые типоразмеры слябов и марки
стали могут разливаться только на конкретных (не всех) установках.
Некоторые серии должны быть обязательно в конце смены, поскольку их
продолжит следующая смена.   Как это выглядит на практике  Вот кадры,
которые показывают в презентациях:   Это онлайн-планировщик сменных
заданий   А это «живая» мнемосхема цеха, на которой видно текущее
местоположение стальковшей и другого оборудования   А вот так это
выглядит в цехе:     Сталевар   Зеркало металла   Основной рабочий
инструмент отслеживания плана — мнемосхема цеха и статусы каждого из
ковшей:     На мнемосхеме мы наблюдаем в реальном времени перемещение
ковшей, статус плавок в них, состояние сталевозов и кранов. Любой
мостовой кран может стать узким местом, как и любой агрегат. Каждая
плавка снабжается связкой с камерой, которая её отслеживает.
Система называется «Гефест». Алгоритм оптимизации плана, заложенный в
систему, интересен в первую очередь тем, что позволяет очень гибко
учесть всё то большое количество технологических требований и нюансов,
которое отличает чистую математическую задачу от прикладной. Эта
гибкость позволяет использовать оптимизатор ещё и как инструмент
моделирования и сценарного анализа.    Что касается отслеживания
ковшей, надо сказать, что это отдельная проблема, далеко выходящая за
рамки исключительно распознавания образов и детекции событий
нейросетями.   Вот тут вы можете видеть 1 Тб стали — на самом деле это
лоток с металлоломом:     Номера стальковшей выглядят вот так. Видите
его? А он есть, и машинное зрение его видит:     Первый блок
отслеживания — это видеоаналитика, которая распознаёт сталевозы,
положения кранов, номера ковшей (гораздо лучше, чем люди) и так далее.
Второй блок — это алгоритмическая надстройка над сигналами
видеоаналитики, ведь это отдельная непростая задача — сформировать
целостную траекторию движения ковша с плавкой по событиям и сигналам с
нескольких десятков камер.    Почему видеоаналитика, а не датчики?
Потому что мы не видели датчика, который бы у нас не сгорел.
Температура стали 1600 градусов примерно. К концу смены датчик
прогорит, будет залит каплями расплава или шлака, закопчён газами и,
если там было что-то магнитное, размагничен. Несколько раз. Даже в
самых экзотических местах даже пассивные метки довольно уязвимы.   Для
каждого сортамента стали у нас есть зависимости, как именно увеличение
времени обработки стали сказывается на допзатратах с нагревом и
удалением кислорода. Первая наша цель — хорошее планирование, когда
эти допзатраты не нужны — с учётом регламентных ремонтов, графика
заказов и всех обстоятельств. Вторая цель — в случае нештатной
ситуации — перераспределение графика для минимизации потерь. Сделать
это на бумажке или в уме хоть сколько-то оптимально невозможно.
Итак:   Планировщик назначений даёт нам оптимальный план. Оперативный
планировщик позволяет получить детальный план по агрегатам и
перестраивать его по требованию. Критерии оптимизации планов
производства заданы в математической модели сервиса.  При нештатной
ситуации и несколько раз за смену планы актуализируются для
минимизации потерь.  Работает цифровой двойник производства на основе
видеоаналитики.  Есть прямой доступ ко всем видеокамерам системы.
Реализовали мы это своей командой и екатеринбургской командой ООО
«Дата-Центр Автоматика», работающей в металлургии не первый год.
Текущий экономический эффект — 4% экономии по электроэнергии,
электродам и алюминиевой катанке. Он достигается за счёт сокращения
времени выдержки металла в стальковше до 7%. Плановый эффект по
экономии энергии, электродов и алюминия от использования сервиса — 100
миллионов рублей в год. При этом мы также снижаем брак, но посчитать
точно пока не можем, здесь мы будем сравнивать исторические серии. По
ощущениям — на порядок больше.
