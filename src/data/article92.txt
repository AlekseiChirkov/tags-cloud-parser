Автор: saul
Дата: 2021-10-07T06:04:43.000Z
Название: Что такое Intel Xeon Scalable Gen3?
Теги: Блог компании Intel, Компьютерное железо, Процессоры
Текст:
В свое время, в далеком уже 2017 году, мы опубликовали статью Что
такое Intel Xeon Scalable?, в которой поясняли суть масштабной
трансформации серверной линейки процессоров Intel. С тех пор прошло 4
года и два поколения Xeon, и мы вновь решили вернуться к этой теме.
Что представляют из себя Intel Xeon Scalable Gen3, какие новейшие
технологии они в себя вобрали? Как выглядит линейка Xeon, что означают
многочисленные индексы моделей? Обо всем этом мы расскажем здесь.  Все
о ядре Sunny Cove  Начнем с самого главного. Семейство Ice Lake-SP,
процессоры Intel Xeon Scalable третьего поколения, предназначены для
использования в двухсокетных серверах (платформа Whitley) и включают в
себя ядра Sunny Cove, выполненные по 10 нм техпроцессу. Вот так во
всей своей красе выглядит кристалл 28-ядерного процессора Ice Lake-SP.
В ядре Sunny Cove много микроархитектурных усовершенствований и
новшеств. Сравним важнейшие характеристики ядра с предшествующим
поколением.     Cascade Lake  Ice Lake   Буфер для хранения инструкций
для внеочередного исполнения команд  224  384   Количество операций
загрузки + хранения в кэш-памяти  72 + 56  128 + 72   Количество
команд в планировщике  97  160   Количество регистров (целочисленных и
с плавающей запятой)  180 + 168  280 +224   Очередь выборки команд  64
на поток 70 на поток;   L1Dкэш (Kбайт)  32  48   Скорость работы L1
Dкэша (загрузка + хранение) (Байт/Цикл)  128 + 64  128 + 64   Буфер
ассоциативной трансляции L2 (записей)  1.5K  2K   L2-кеш (Мбайт)  1
1.25  Микроархитектура ядра Sunny Cove выглядит следующим образом.
Подытоживая, выделим основные улучшения Sunny Cove по сравнению с
предшественником.  Улучшен блок выборки команд – больше емкость и
быстрее предсказатель переходов Более широкий и глубокий уровень
выполнения команд – больше ресурсов на выборку и выполнение Улучшения
в кэше адресов L2, ускорение однопоточных вычислений, алгоритмов
предвыборки Серверные улучшения – больше L2-кэш, второй FMA (fused
multiply-add) блок   И, наконец, еще один принципиальный вопрос —
добавленный аппаратный функционал ядра. Итак, о новых инструкциях
Sunny Cove. Для нужд криптографии добавлены операции арифметики
больших чисел (AVX-512 Integer Fused-Multiply-Add), в частности,
VPMADD52 — FMA 52-битных целых. А также инструкции векторного AES, в
том числе допускающие параллельную обработку, и новые инструкции поля
Галуа (алгоритмы шифрации и коррекции ошибок). Добавлена аппаратная
поддержка алгоритмов криптографического хеширования SHA-NI.   В
области сжатия данных и специальных SIMD-инструкций также проведена
большая работа. Добавлены операции битовой алгебры, а также инструкции
VBMI (Vector Bit Manipulation Instruction) для операций перестановки,
сдвига, расширения и сжатия, используемых в дискретной математике,
словарной декомпрессии и проч.  Что в индексе тебе моем  Нынешний
«большой запуск» включает в себя сразу 53 модели процессоров. Как
разобраться в таком разнообразии? В этом нам помогут индексы моделей,
разделяющие все поколение на группы. Признаться, сначала эти индексы,
наоборот, всех запутали — к нам регулярно приходили просьбы пояснить
их значение. Что ж, сейчас есть возможность разобраться в обоих
вопросах.   В таблицах ниже приведены основные характеристики каждой
серии. Темно-серый цвет обозначает класс Xeon Platinum, желтый — Xeon
Gold, светло-серый — Xeon Silver.   Начнем мы с серии H/HL для 4- и
8-сокетных платформ, стоящей во всей линейке несколько особняком. Эти
модели принадлежат к предыдущему семейству Cooper Lake, выполнены по
14-нм техпроцессу и имеют соответствующий функционал (ревизию PCIe,
поддержку памяти и т.д.). Они предназначены для специально
разработанных для них серверов — просим иметь в виду. Серия Н
поддерживает до 1,2 Тб памяти на сокет, HL — до 4,5 Тб.     Далее
следует основная серия без индексов (ну, почти). Она олицетворяет саму
сущность Xeon Scalable: масштабируемость и полезность каждого ядра —
вы получаете ровно то, что вам требуется. Как видите, совсем без
индексов и тут не обошлось: модели с буковкой Y поддерживают
технологию Intel Speed Select — Performance Profile 2.0 (Intel SST
PP). На эту тему мы еще поговорим.      Отдельно обратим внимание на
серию с увеличенным размером анклава SGX — они не удостоились
отдельного индекса, но имеют 512 Гб под анклавы SGX вместо типовых для
Gen3 64 Гб. Дополнительные индексы в этом списке: Q — предназначен для
водяного охлаждения, S — поддерживает Intel Speed Select — Performance
Profile 2.0.    Серия P/V для облачных провайдеров насчитывает пока по
одному экземпляру каждого процессора. P предлагается использовать в
IaaS, а V — в SaaS платформах виртуализации.    Модели с индексом N —
для сетевых устройств и технологий виртуализации сетевых функций.
Очень маленькая пока серия М — для обработки медиа и AI-применений.
Индекс T указывает на соответствие стандарту NEBS — такие процессоры
могут работать в экстремальных условиях и рассчитаны на длительное
использование.     Процессоры серии U могут использоваться только в
односокетных платформах.     Теперь вы знаете об индексах Xeon
Scalable Gen3 всё!  Speed Select бывает разный  Далее хотелось бы
затронуть еще одну важную тему. Процессоры Xeon Scalable Gen3 — это не
только большое количество мощных ядер, но и самая интеллектуальная у
Intel технология управления их производительностью. Набор средств для
обеспечения максимальной эффективности использования процессора Xeon
носит название Intel Speed Select (Intel SST) и включает в себя:
Intel SST – Performance Profile (Intel SST-PP, ранее Speed Select);
Intel SST – Base Frequency (Intel SST-BF, ранее Prioritized Base
Frequency); Intel SST – Core Power (Intel SST-CP); Intel SST – Turbo
Frequency (Intel SST-TF, ранее FACT).   Первые две технологии доступны
только для семейства Ice Lake, вторые, в том числе, и для Cooper Lake
— моделей с индексом Н. Расскажем коротко о каждой из них.    Intel
SST-PP позволяет сконфигурировать для процессора три конфигурационных
профиля, включающих в себя количество активных ядер, TDP, базовую
частоту SIMD, температуру перехода (TjMax), а начиная с Ice Lake еще и
ряд других, таких как базовая частота AVX2/AVX512, частота памяти и
прочее. Управление конфигурациями осуществляется с помощью утилиты
Intel. Таким образом, мы получаем три фиксированных набора
характеристик (показаны на схеме звездочками), оптимальных для каких-
либо нагрузок — по сути, три разных процессора. Далее, эти процессоры
используются различными группами пользователей для своих задач на
основе разделения времени или по графику: скажем, днем сервер
выполняет функцию VDI, а ночью считает результаты каких-либо
экспериментов или занимается тяжелым рендерингом.    Intel SST-BF, как
следует из названия, перераспределяет базовую частоту между менее и
более приоритетными ядрами, тем самым улучшая общую производительность
системы, ведь при ее использовании дополнительную частоту получат ядра
с критически важной нагрузкой.     С помощью Intel SST-CP операционная
система или менеджер виртуальных машин может назначать приоритеты
процессорным ядрам. Когда появляется возможность для повышения
частоты, Power Control Unit (PCU) распределяет запас согласно
приоритетам. Приоритезация частоты работает с расширениями SSE, AVX2,
AVX512. Таким образом, дополнительная производительность доставляется
именно туда, где она требуется больше всего: для решения критических
на текущий момент задач и ликвидацию узких мест.     SST-TF позволяет
выбранным приоритетным ядрам превысить потолок максимальной турбо-
частоты; при этом турбо-частота для остальных ядер будет уменьшена
исходя из ТТХ процессора. Набор приоритетных ядер может изменяться
динамически во время работы.  Почему стоит переходить на Gen3 уже
сейчас?  Напоследок давайте подведем итоги, так сказать, с
потребительской точки зрения. Почему Xeon Scalable Gen3 интересны
прямо сейчас? Во-первых, все вышеперечисленные улучшения вылились в
солидный прирост производительности — около 20% по сравнению с
предшественниками. Это означает, что для тех же задач можно
использовать или меньше серверов, или более дешевые процессоры.   Во-
вторых, напомним основные технические преимущества — для кого-то это
тоже будем важным.  8-канальная (макс.) память DDR4-3200 до 6 Тб на
процессор; Intel Optane Persistent Memory 200 для реализации больших
объемов памяти и быстрых накопителей; PCI Express 4.0 — новые скорости
для средств хранения и всей периферии (до 64 линий); не забываем про
Intel VROC — ее обновленная версия вкупе с новой конфигурацией PCIe
позволяют создать NVMe хранилища со скоростными характеристиками,
недостижимыми для обычного RAID.   В-третьих — думаем, это
заинтересует разработчиков — новые фишки Gen3, о которых мы
рассказывали вначале. уже реализованы в свежих версиях компилятора
Intel oneAPI DPC++/C++. Как говорится, функциональность готова к
употреблению.   Сервер HPE ProLiant DL380 Gen10 Plus на базе Intel
Xeon Scalable Gen3   Ну и в-четвертых, что немаловажно, ведущие
производители серверного «железа», такие как HPE, ASUS и прочие, за
этот год успели представить большой ассортимент продуктов на базе Gen3
— как готовых к использованию изделий, так и различного рода
«конструкторов». Так что с предложением проблем также быть не должно.
Мы рассказали самое основное о процессорах Intel Xeon Scalable Gen3.
Если вам интересна эта тема, пишите нам, о чем бы вы еще хотели
узнать.
