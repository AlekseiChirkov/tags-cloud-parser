Автор: Data_center_MIRAN
Дата: 2021-09-22T09:49:51.000Z
Название: В моём офисном фургоне шесть каналов в интернет, а скоро будет семь
Теги: Блог компании Дата-центр «Миран», Сетевое оборудование, DIY или Сделай
сам, Сотовая связь, Удалённая работа
Текст:
Если работаешь на удалёнке, то нужен чертовски хороший интернет. Тем
более когда твой офис в фургоне, который колесит по всей Австралии. Но
лично в своём фургоне я настроил самую надёжную связь на континенте.
Даже в городских офисах ни у кого нет такой избыточности каналов.
Всем привет, меня зовут Джефф. Я инженер-программист в Gitpod, это
опенсорсная система для быстрого развёртывания в облаке эфемерных сред
разработки, для любой задачи, за несколько секунд (CI/CD для dev-
окружений). Последние несколько месяцев я веду минималистический образ
жизни, неторопливо колеся в фургоне по Австралии.         В предыдущих
сериях...  Этот пост — четвёртый в серии статей об удалённой работе из
фургона. Если вы впервые читаете мой блог и возникли вопросы по быту
(включая туалет или душ) и организации рабочего процесса, можете
посмотреть прошлые статьи:  Новая глава  Для многих 2020-й станет
тяжёлым годом, но для меня значительно тяжелее был 2019-й, поскольку
стало ясно, что долгосрочные отношения не сложились…    Как долго
Люди часто спрашивают, сколько я собираюсь жить в фургоне. Что ж,
давайте разберёмся.    Мой офис — палатка, которую мне купила компания
В инстаграме куча гламурных фото с хэштегом #vanlife (жизнь в
фургоне). Это правда. Большой мир вокруг чертовски красив, но за
красоту приходится платить.   Архитектура сети  Вот как я собрал
автомобиль с лучшим в Австралии подключением к интернету.     Интернет
в фургоне быстрее и в шесть раз надёжнее, чем в типичном австралийском
доме.  Оборудование  В Австралии три оператора мобильной связи.
Поэтому логично, что фургон подключён по каналам Telstra, Optus и
Vodafone.  Я использую модемы Huawei B818, поскольку они работают от
12 вольт и это 4G-модемы LTE категории 19 с поддержкой агрегации
несущих. Каждый 4G-модем подключен к собственной всенаправленной
антенне XPOL-1-5G. У нас модемы Huawei B818 можно недорого найти на
eBay, и хотя на них стоит логотип Optus, они работают со всеми
операторами мобильной связи.  Важно поставить именно внешние антенны,
потому что изоляция моего фургона мешает приёму мобильной связи, а
встроенные антенны модемов — вообще мусор по сравнению со
специализированными.  На заднем борту также установлены две WiFi-
антенны Alfa AOA-2458 с высоким коэффициентом усиления (high gain),
подключенные к USB WiFi адаптеру Alfa AWUS036ACH, который забирает
входящий трафик из дружественных хотспотов WiFi.       Наконец, есть
модем Nokia FastMile 5G, который обеспечивает высокоскоростную
передачу данных в зонах 5G (то есть когда я выбираюсь в город).
Поскольку этот модем не поддерживает внешних антенн, я примонтировал
его в кабине, а оттуда проложил сетевой кабель к коммутатору.   Да, в
моём фургоне есть кресло Aeron ;)   Всё вышеперечисленное объединяется
в один канал через виртуальную машину ESXi на мини-компьютере Intel
NUC с восемью портами Ethernet (подключена к маршрутизатору фургона).
Сетевой контроллер UniFi Dream Machine Pro обеспечивает подключение по
WiFi через UniFi AC Mesh Pro (когда сижу в парке на скамейке) и UniFi
AC Pro (когда сижу внутри фургона).      Объединение нескольких
сетевых соединений  Ключевое приложение для интеграции всего этого —
Speedify, которое объединяет несколько интернет-каналов в единое
связанное «суперсоединение». Оно автоматически устанавливает приоритет
стриминга над другим сетевым трафиком, чтобы избежать лагов,
буферизации и разрывов.   Даже если у каждого соединения слабый сигнал
с экстремальной потерей пакетов, Speedify объединяет их в одно хорошее
соединение без потери пакетов   Для всех сетевых соединений внутри
Speedify можно настроить собственные правила приоритета трафика,
например:  Если нет подключения к сети на модеме 5G и дружественный
WiFi недоступен, то использовать только модемы 4G, кроме Telstra 4G,
потому что трафик в пакете Telstra полностью израсходован.  Сетевые
подключения можно настроить в соответствии с разными шаблонами. Есть
три режима:   Потоковая передача: Speedify максимизирует скорость и
надёжность потокового трафика (видеозвонки, аудиозвонки, прямые
трансляции и т.д.), разумно используя избыточность каналов, чтобы
выжать наилучшую производительность из имеющихся соединений. В этом
режиме дополнительные данные из избыточных каналов улучшают качество
потоковой передачи.  Скорость: интеллектуальное распределение трафика
между всеми доступными соединениями, чтобы обеспечить оптимальную
скорость и производительность.  Резервирование: Speedify работает на
скорости самого быстрого соединения и использует дополнительные данные
для повышения надёжности. В этом режиме каждый пакет отправляется
одновременно через несколько соединений, и какой дойдёт первым, тот и
будет доставлен.   Когда я сижу в кемпинге с ужасным соединением на
всех линиях, то переключаю Speedify в режим резервирования. Он
проявляет себя просто удивительно — бывало, в удалённых районах Нового
Южного Уэльса мой телефон не ловил сигнал мобильной связи, но интернет
соединение оставалось достаточно надёжным для потоковой музыки со
Spotify.              Мониторинг аптайма  Каждый канал контролируется
датчиком RIPE Atlas (v4), который запитывается по Ethernet.
Стоимость  Наверное, вам интересно, сколько это стоит? Так вот, самый
быстрый, надёжный и портативный интернет в стране стоит около $200 в
месяц в переводе на USD (+100 после запуска Starlink), причём большая
часть затрат вычитается из налогов, поскольку это расходы на бизнес. В
будущем я планирую продавать доступ в Сеть (через UniFi Captive
Portal) коллегам в кемпинге, фрилансерам и удалёнщикам, поэтому цена
меня не волнует, поскольку этот интернет будет приносить доход.
Излишество  Конечно, сетевая конфигурация с шестью каналами — это
излишество, но мне для работы критически важен работающий интернет,
чтобы зарабатывать деньги, а также общаться с моими маленькими
детишками. Нет ничего лучше, чем пожарить зефир на костре, приготовить
попкорн и погрузиться в любимые фильмы детства.           Честно
говоря, мне для программирования даже не нужно быстрое подключение,
потому что с нашей программой Gitpod компьютер работает как
полноценный ЦОД. Но важно минимизировать потерю пакетов — именно здесь
в игру вступает шесть (скоро будет семь) интернет-каналов.   Впрочем,
дополнительная пропускная способность и отказоустойчивость очень
помогают в стримах на твиче!  Самый простой концепт избыточного
интернета  Приложение Speedify выпускается для Android и iOS. В самой
простой конфигурации можно соединить внешний 4G-маршрутизатор
Nighthawk WiFi с планшетом или смартфоном.     Именно такую схему я
использовал две недели назад во время работы в горах Бунья с iPad Pro
и аккумулятором USB-C на 27 000 мВтч.     P. S. Дорогой Илон,
подключишь меня к Starlink поскорее?
