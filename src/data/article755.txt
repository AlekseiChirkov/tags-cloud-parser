Автор: Kingston_Technology
Дата: 2021-09-24T06:00:02.000Z
Название: Какими бенчмарками сравнить производительность железа на Linux и
Windows?
Теги: Блог компании Kingston Technology, Настройка Linux *, Системное
администрирование *, Софт, Накопители
Текст:
Привет, Хабр! Недавно мы рассказывали, как протестировать скорость
SSD-диска пользователям Linux, а заодно наткнулись на баг в прошивке у
некоторых из наших SSD–накопителей, исправленный весенним обновлением.
В процессе подготовки той записи возникла мысль взглянуть и на общую
разницу в производительности двух систем. Вдруг на актуальных
ноутбуках и вправду нет разницы между Linux и Windows? Плюс собрать
тут простые и наглядные мультиплатформенные бенчмарки. Разумеется,
прогнав их на Windows 10 и Ubuntu 20.04. Но сперва позвольте минутку
поностальгировать, не против?     Почему на Linux так мало бенчмарков?
Если пользоваться только Windows, может сложиться неправильное
представление о мире компьютерного софта, где доступно множество
утилит проверки мощности вашего железа и различных бенчмарков. Но
стоит перейти на любой Linux–дистрибутив, и привычного 3DMark уже след
простыл. А заодно и других популярных утилит, типа CPU-Z и прочих.
Ощущение, словно приехал осваивать целину! А прежде чем что-то
протестировать, этот бенчмарк необходимо еще написать да нарисовать.
Но почему так мало бенчмарков для Linux–систем? Ответ на этот вопрос
прозвучит так же, как и нежелание разработчиков тратить годы жизни на
создание достойной альтернативы продуктам Futuremark. Это упущенные
деньги. Ведь покупатели, особенно с деньгами на флагманское железо,
намерены получить максимум отдачи с покупки. А эффектнее всего
раскрыть потенциал можно в играх, прочно завязанных на API DirectX.
Корпорация Microsoft не зря потратила огромные бюджеты на борьбу с
игровыми приставками Sony и Nintendo в конце 90-х, создав мощную
инфраструктуру для игровых разработчиков. А заодно популяризировала
мощные ПК для домашнего использования, специально в развлекательных
целях. Также, как сегодня YouTube подарил тренд на любительский
видеомонтаж.   Пожалуй, одна из самых культовых игр на движке,
созданном во времена доминирования OpenGL   С точки зрения
бизнес–модели, у сообщества Linux Foundation не было ни единого шанса
конкурировать с Microsoft на этом поле. Как результат, сегодня любой
производитель софта выбирает Windows по умолчанию. И производители
железа также следуют этому направлению. Для Windows 10 мы регулярно
обновляем утилиту Kingston SSD Manager, в которой с марта доступно
обновление прошивки контроллеров. А под Linux–системы доступ по API
закрыт и обновить софт контроллера накопителя не получится. Это лишь
один из множества примеров, в которых детище Microsoft гораздо
дружелюбнее к железу, нежели UNIX–системы.   Но сейчас интересует
другой вопрос: как отличается производительность железа под Ubuntu и
Windows под влиянием этих обстоятельств? Для этого есть конкретный
кейс с ноутбуком HP Pavilion Gaming 15 на базе актуального железа,
прокачанного быстрым NVMe–накопителем Kingston KC2500. Его и сравним
на производительность в разных операционных системах. Для чистоты
эксперимента добавим и третью заметную операционку. Чтобы полученные
данные можно было сравнить с вашими замерами.  Что конкретно будем
сравнивать?  Первоначально идея собрать в одном посте актуальный
бенчмарк-пакет для Ubuntu родилась с поисков альтернатив
CrystalDiskMark для Linux–систем. Но в процессе сбора фактуры основной
ноутбук “приказал долго жить” и отправился в сервис на ремонт. Взял и
неожиданно выключился, перестав реагировать на кнопку включения, даже
на зарядке при отключенном аккумуляторе. Возникла потребность купить
подмену на время ремонта, уложившись в 1000 евро. И если осенью за эти
деньги ноутбуки с 2060Ti были в изобилии, сейчас даже за 1650 Ti
выстраивается очередь. Что поделать, все основные фабрики микрочипов в
мире перегружены заказами.   HP Pavilion Gaming 15 тактильно приятен и
актуально смотрится за свою цену    На время удалось взять 15” HP
Pavilion Gaming 15 с Ryzen 5 4600H, 16 ГБ оперативки и GeForce GTX
1650Ti. Средний ценник такой конфигурации приближается к 80 000
рублей, а по характеристикам не сильно отличался от сданного в ремонт
аппарата. Тут и возникла идея добавить к сравнению Macbook Air с
процессором M1, чтобы сопоставить результаты мультиплатформенного
бенчмарк–теста. Ведь по деньгам ноутбуки весьма похожи, а на разницу в
стоимости HP Pavilion был дополнительно прокачан терабайтным
SSD–накопителем Kingston KC2500. Интересно проверить, сможет ноутбук
этой ценовой категории показать на Ubuntu паспорт 4-х линий PCI-
Express?   У NVMe–накопителя Kingston KC2500 порог скорости 3.5 ГБ/с
на чтение и 3 ГБ/с на запись  Какие бенчмарки чаще всего рекомендуют
для Linux?  Если вбить в поисковик запрос о бенчмарках для Ubuntu,
самым популярным вариантом окажется Phoronix Test Suite. Удобный пакет
утилит для комплексной проверки системы по отдельным компонентам. Его
рекомендуют практически в каждой статье из выдачи поисковика, упуская
из виду предысторию разработчика. Ведь Phoronix не является
конкурентом студии futuremark, а фирменный пакет тестовых утилит
является сборником из сторонних решений. Этакий набор Майкла Лэребала,
названный в честь своего сайта.   Тут самое время напомнить про абзац
из вводной, где упоминалось рождение игровой инфраструктуры под
Windows. Как раз тогда сообщество OpenBenchmarking.org только
зарождалось, став крупнейшим в Linux–среде. Сейчас эту платформу можно
рекомендовать скорее в качестве проверки отказоустойчивости рабочей
станции. Достаточно взглянуть на результаты бенчмарка, например, по
этой ссылке.   Кстати! В 2020 году Майкл Лэребалл уже сравнивал лоб-в-
лоб операционные системы Windows 10 и Ubuntu, но использовал для этого
нетбук за пару сотен евро. У него армия пингвинов с легкостью закрыла
окна и форточки в большинстве тестов. Но мы с вами знаем, насколько
тяжело работать на подобных ноутбуках в реальной жизни.  Простые и
удобные бенчмарки для Ubuntu и всех ОС Графический ускоритель   Наш
подопытный ноутбук HP Pavilion Gaming 15 оснащен дискретной графикой
Nvidia GeForce GTX 1650 Ti и обойти стороной её потенциал будет
некорректно. К счастью, долго искать альтернативу 3DMark не придется,
ведь пакет бенчмарков Phoronix уже содержит искомый ответ.    А
точнее, наводку Unigine Heaven образца 2009 года. Не самое свежее
решение, однако, компания Unigine давно производит графические движки
под коммерцию. А бенчмарки выпускает скорее в качестве рекламной
продукции. Именно это нам и требуется, ведь игровые движки с
физической моделью умеют поддать жару всем компонентам системы. И
современный ассортимент Unigine включает искомые кандидатуры:
бенчмарки Valley 2013 года и Superposition 2017 года.   Бенчмарк
Unigine Valley смотрится на одном уровне с игрой The Witcher 3: Wild
Hunt   Главное, что оба тестовых пакета доступны не только под Ubuntu,
но и пользователям Windows, что позволит сравнить реальные отличия в
производительности всей системы и особенно графики. Бенчмарк Valley
доступен не только под Windows и Ubuntu, но и под OSX, и там его тоже
запустим.  Процессор   С поиском бенчмарка для центрального процессора
все еще проще, если отталкиваться от мультиплатформенности, как
основного требования. Тут нет конкурентов Geekbench 5, и объективных
причин искать альтернативы не так много. Тот же Cinebench R23 весьма
специфичен по характеру нагрузки на систему, плюс не позволит сравнить
результаты с мобильными платформами. А Geekbench доступен на Android,
Windows и Ubuntu, плюс на многих других популярных ОС для портативных
устройств и настольных решений, включая серверное оборудование.
SSD–накопитель   Традиционно на Windows 10 мы рекомендуем использовать
простую общедоступную утилиту CrystalDiskMark, которую удобно
использовать в сочетании с CrystalDiskInfo для мониторинга показателей
S.M.A.R.T. под нагрузкой. Если вы используете твердотельный накопитель
Kingston, рекомендуем установить наше фирменное приложение SSD
Manager, в котором можно контролировать исправность диска и обновить
прошивку контроллера в пару кликов. Ознакомиться с актуальными
версиями прошивок можно по этой ссылке.    Оперативная память   С
проверкой оперативной памяти в среде Windows 10 выбор многих
пользователей останавливается на проверенной временем AIDA64. Удобный
и простой в освоении инструмент для просмотра информации об аппаратной
начинке компьютера, он также доступен на смартфоны с Android и iOS на
борту. Во вкладке бенчмарков доступна утилита проверки скорости кэша и
RAM, вполне корректно указывающая фактические значения в параллели от
заявленных цифр.   Но в случае с Ubuntu вариант скачать AIDA64 не
подойдет, ввиду отсутствия этой программы для настольной Linux.
Альтернатив в наличии не так много, к тому же выдаваемые некоторыми
значения, далеко не всегда похожи на корректные значения. Например,
результаты измерений в консольной Sysbench никак не получится
коррелировать с тем, что выдает AIDA64. Гораздо ближе к правде
результат выдает Memtest86, доступ к которому доступен через терминал,
вводом команды установки:  sudo apt-get install mbw  Установка
бенчмарков на Ubuntu 20.04  Как и большинство приложений под Linux,
все бенчмарки нашей троицы устанавливаются через терминал, контейнеры
проще всего скачать с сайтов разработчиков, а тот же KDiskMark,
недоступный в Fedora, можно установить напрямую из магазина. С
бенчмарками Unigine ситуация обстоит чуть веселее, но это приложение с
графическим интерфейсом меню. Только сперва необходимо запустить его
командой в терминале.     С Geekbench ситуация обстоит еще интереснее.
Приложение запускается с ручным добавлением полномочий администратора
у исполняемого файла. Вместо интерфейса работает приложение в
терминале и выполняется около минуты. По окончании генерируется отчет,
загружаемый на сервер. Вам остается скопировать ссылку и взглянуть на
результат.    Результаты Geekbench 5   Geekbench 5.4 (Ubuntu 20.04):
browser.geekbench.com/v5/cpu/7935554  Geekbench 5.4 (Windows 10):
browser.geekbench.com/v5/cpu/7954729   Как видно по результатам замера
процессора, разница в производительности укладывается в рамки
статистической погрешности. Обе операционные системы позволяют
раскрыть потенциал AMD Ryzen 5 4600H в том же Blender уже спустя
несколько минут после установки операционки. Главное не забыть
установить драйвера GeForce GTX 1650 Ti, прежде чем перейти к запуску
следующих тестов.    Unigine Valley   Учитывая эксклюзивные права
Microsoft на использование системой API DirectX, под управлением
Windows 10 этот бенчмарк запускался еще и с использованием OpenGL.
Если судить по работе активной системы охлаждения, данный бенчмарк
здорово нагружает систему в целом. Качество отрисовки картинки выше
уровнем, чем в игре Ведьмак 3, а итоговый результат в баллах смотрится
куда нагляднее многих альтернатив.   Unigine Valley (Windows10) +
DirectX   Unigine Valley (Windows10) + OpenGL   Unigine Valley (Ubuntu
20.04) + OpenGL   Разницу в производительности между разными API уже
сложно отнести к статистическому разбросу. В родной Windows–среде
DirectX уверенно опережает мультиплатформенный стандарт прошлых лет,
которому та же Apple с упорством пытается противопоставить собственный
Metal.  Unigine Superposition   Если предыдущий бенчмарк смотрится уже
не столь свежо и актуально в плане графической вылизанности, последнее
поколение бенчмарка выглядит актуально по всем параметрам, а
трассировку лучей подопытная карточка все равно не поддерживает. Тем
не менее, данный бенчмарк еще очевиднее раскрывает превосходство
Windows 10 для графики и игр.    Unigine Superposition (Windows10) +
DirectX   Unigine Superposition (Windows10) + OpenGL   Unigine
Superposition (Ubuntu 20.04) + OpenGL   Отдельно хочется похвалить
разработчиков бенчмарка за весьма эффектный сюжет происходящего на
экране. Для мощных систем тут можно выставить 4К-разрешение и ультра-
графику, а нам достаточно средних при 1080p, осаждающих fps ниже 60.
Проверка скорости накопителя   Для измерения скорости SSD на Windows
был запущен CrystalDiskMark, уверенно выдавший паспортные значения
терабайтной модификации. Учитывая скромные запросы по ресурсам у
современных операционок, фоном и при чтении сайтов, температура диска
редко подскакивает выше 50°С, тогда как запущенный дисковый бенчмарк
поднимает температуру к отметке 69°С. Результаты замера близки к
заявленным: 3517 МБ/с на чтении и 3000 МБ/с на запись.    Замер
Kingston KC2500 в CrystalDiskMark (от сети)   Правда, стоит только
отключить ноутбук от зарядки, и скорость диска падает ровно вдвое,
словно у M2–слота отбирают половину линий PCIe. Такой маневр,
выполняемый при максимальных настройках производительности, натолкнул
на мысль еще раз прогнать тест Unigine Superposition.   Замер Kingston
KC2500 в CrystalDiskMark (от аккумулятора)   И догадки о падении
итогового результата быстро подтвердились. Ощущение, что вдали от
розетки игровой ноутбук HP Pavilion Gaming 15 позволяет себе некоторые
хитрости, и найти их в BIOS не удалось.   В среде Ubuntu 20.04
аналогичные значения производительности диска можно получить в
проверенном KDiskMark, отображающим весьма похожий результат в работе
от зарядного устройства.   Замер Kingston KC2500 в KDiskMark (от сети)
Замер Kingston KC2500 в KDiskMark (от аккумулятора)   И схожее падение
скорости во время замеров от аккумулятора — вновь потолок на чтение
опускается до отметки в 1700 МБ/с. Такое поведение системы подводит
нас к тому, что конкретную модель ноутбука нецелесообразно прокачивать
быстрым NVMe–накопителем уровня Kingston SKC2500, если вы планирует
большую часть времени работать вдали от розетки. Достаточно будет
остановиться на решении классом ниже, таком как модель А2000,
демонстрирующая сопоставимый номинальный уровень скорости. Если же
ноутбук большую часть времени будет работать от сети, тогда быстрый
диск оправдан и добиться заводских 3500 МБ/с получится и на Linux.
Результаты тестов памяти  Чтобы не ограничивать процессор AMD Ryzen 5
4600H по частоте 3200 МГц, в ноутбук была установлена память HyperX
Impact 2x8 GB с таймингами 20-22-22-42. Такой комплект выигрывает у
большинства комплектных конфигураций памяти не только по таймингам, но
и фактической пропускной способностью. При частоте 1600 МГц и в
двухканальном режиме две планки выдают уверенные 45 ГБ/с на чтении и
записи.   Замер 8+8 ГБ DDR4 3200 HyperX Impact в AIDA64   Но в случае
с бенчмарком памяти Memtest86 в среде Ubuntu, потолок по скорости
составляет около 41,5 ГБ/с, и этот результат удается получить не
каждый раз. Иногда и вовсе итоговые значения не поднимаются выше 12
ГБ/с, хотя это легко объяснить слабой нагрузкой теста и высокой
скоростью прогона десятка тестовых пакетов.    Замер 8+8 ГБ DDR4 3200
HyperX Impact в Memtest86   В замерах памяти утилитой sysbench ни одно
из значений не было даже близко похоже на данный результат. Кстати,
запускается Memtest с помощью команды в терминале:  mbw -t1 1Gb   Тут
самое время упомянуть о внешне похожей на AIDA64 утилите Hardinfo, в
которой также есть вкладка бенчмарков. В сети можно встретить даже
советы ими воспользоваться. Вместо предостережения от последнего шага
достаточно упомянуть названия бенчмарков: майнинг, ре-трейсинг и
прочая экзотика. Никаких замеров скорости оперативной памяти и кэша в
данном приложении не предусмотрено.  Что показали бенчмарки на Macbook
Air (M1)?  Для проверки мультиплатформенности и добавления нотки
репрезентативности нашей подборке бенчмарков, они также были запущены
на базовой версии Apple Macbook Air, с их фирменным чипсетом M1. В
рамках данного сравнения предлагаем не затрагивать различия тонкой
печатной машинки без вентилятора и полноразмерного ноутбука весом
почти 2 кг. Обе модели стоят приблизительно одинаково, а большинство
обзоров в сети едва не обожествляют приход ARM в мир настольных
систем. Давайте проверим столь громкие заявления.   Geekbench 5.4 (Big
Sur 11.3.1 Apple M1): https://browser.geekbench.com/v5/cpu/7935740
Отрыв по производительности в одноядерном тесте у Apple M1 довольно
внушительный, но многоядерный результат сводит отрыв до куда более
скромных 10%.   Unigine Valley (Big Sur 11.3.1 Apple M1) + OpenGL
Стоит запустить графический бенчмарк с настольным уровнем графики, и
весь запас мощности чипсета Apple сводится в ноль. А задняя крышка
нагревается до неприличных 40°С. От заявленной энергоэффективности
также не остается и следа, аккумулятор разряжается в ноль буквально за
2 часа.   Но стоит отдать должное, тестовый замер скорости диска никак
не отличается при работе от аккумулятора, либо по сети. Полученное
значение укладывается где-то посередине между полученными на HP
Pavilion Gaming 15 от сети и от аккумулятора.  Так Ubuntu, или
Windows? Кто производительнее?  Настало время озвучить победителя
нашей бенчмарк–дуэли между Ubuntu 20.04 и Windows 10 актуальной
сборки. Несмотря на схожие результаты замера скорости SSD-накопителя и
центрального процессора, отрыв производительности графического
ускорителя и оперативной памяти не оставляет сомнений в превосходстве
Windows. С оперативкой на частотах 3200 МГц разница едва укладывается
в 10%, а результаты сравнения NVidia GeForce GTX1650 Ti выявили отрыв
до 50%.   И это без использования DirectX вместо OpenGL, что дарит еще
10% отрыв сверху. В играх и моделировании, с операционкой Windows не
готова тягаться и MacOS на компьютерах Apple. Хотя ее дебютный чип M1
и проявил себя довольно конкурентным в сравнении с процессором AMD
Ryzen 5 4600H.   Общий итог сравнения производительности двух систем
лишь подтверждает высказанную ранее позицию о превосходстве Windows 10
при использовании высокопроизводительных комплектующих. На данной
платформе удобнее следить за обновлениями прошивок и драйверов, проще
мониторить состояние дисков и совокупный объем полезного софта ощутимо
выше. Это не означает, что Linux подойдет лишь бюджетным компьютерам с
низким уровнем производительности, но способов раскрыть потенциал
отдельных компонентов уже заметно меньше.     Что такое KIWY? Kingston
Is With You — Kingston всегда с вами.   Продукция, решения и
технологии Kingston широко применяются и используются по всему миру
корпорациями, центрами обработки данных и обычными людьми каждый день
– от авиации и космических станций до смартфонов, ПК и фоторамок.
Самые неожиданные сферы использования решений Kingston узнайте тут.
Для получения дополнительной информации о продуктах Kingston
обращайтесь на официальный сайт компании.
