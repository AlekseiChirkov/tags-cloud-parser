Автор: ashpilsky
Дата: 2021-09-29T07:30:01.000Z
Название: Подключение CDN без кода: как мы упростили интеграцию с помощью DNS-
хостинга
Теги: Блог компании G-Core Labs, IT-инфраструктура *, Сетевые технологии *,
Облачные сервисы, Распределённые системы *
Текст:
Как бы хороша ни была ваша CDN, часть пользователей будет мучаться с
её настройкой. Нам, как одному из топ-3 европейских CDN-провайдеров,
очень хотелось сократить число таких пользователей до минимума. Для
этого пришлось повозиться с интерфейсом личного кабинета, разработать
плагины для CMS и, что самое главное, интегрировать CDN с DNS-
хостингом. Теперь пользователи в no-code режиме подключают сеть
доставки контента к своим сайтам за несколько минут. Рассказываем, как
мы это сделали.Основная проблема подключения CDN к ресурсуОбычно CDN
позволяет кешировать статический контент — это и картинки, и шрифты, и
видео. Все эти данные при подключенной сети доставки контента
пользователи получают с ближайших к ним CDN-серверов, что ускоряет
загрузку данных. Но чтобы браузер пользователя за контентом обращался
именно к кеш-серверу, а не к серверу-источнику, администратору нужно в
коде сайта поменять ссылки на такой контент.Обычно ссылки на файлы
выглядят так:https://gcorelabs.com/image.jpg
https://gcorelabs.com/style.css  https://gcorelabs.com/script.jsЕсли
же ссылки ведут на кеш-сервер, они выглядят примерно
так:https://cdn.gcorelabs.com/image.jpg
https://cdn.gcorelabs.com/style.css
https://cdn.gcorelabs.com/script.jsТут у пользователей и возникает
проблема: многие не знают, как именно заменить все ссылки на
статический контент. Мы решили упростить этот процесс.Возможности
глобальной CDN без погружения в код сайтаС нашей CDN работают многие:
Lamoda, Утконос, Wargaming и десятки других крупных компаний. Как
правило, у бизнеса проблем с интеграцией не возникает — подключением
сети доставки контента там занимаются специализированные отделы.
Совсем иначе обстоят дела у владельцев частных веб-ресурсов, особенно
если они не разбираются в коде. Они нередко управляют
высокопосещаемыми сайтами с пользователями из разных стран, и CDN бы
им пришлась как нельзя кстати, но при подключении возникают
проблемы.Первым делом для таких пользователей мы разработали плагины
для популярных CMS: WordPress и Битрикс. С их помощью подключить CDN к
ресурсу можно без ручного изменения ссылок на контент в коде сайта.
Это избавило от сложностей весомую долю веб-мастеров, но этим всё не
ограничилось. Как минимум, потому что в нашу экосистему сервисов
входит ещё и один из самых быстрых DNS-хостингов в мире, с помощью
которого на поиск IP для запрошенного домена уходит менее 20 мс. Мы
решили интегрировать его с CDN таким образом, чтобы наши NS-серверы
могли использоваться для направления трафика клиента через сеть
доставки контента. Результатом стали сразу несколько новых преимуществ
для клиентов.Используем DNS-хостинг для быстрого подключения CDNВ
первую очередь новое решение упростило настройку CDN. Теперь
владельцам сайтов не нужно вручную изменять ссылки на кешируемый
контент или искать необходимый плагин для CMS при настройке CDN для
своих сайтов. Весь процесс подключения веб-ресурса к сети выполняется
в несколько простых шагов.Пользователю достаточно кликнуть по кнопке
создания ресурса и в визарде выполнить несколько простых
действий:Выбрать «ускорение и защиту всего сайта». Тогда ресурс будет
интегрирован с нашим DNS-хостингом — для этого пользователю нужно
только поменять настройки NS-серверов у своего доменного
регистратора.Ввести домен сайта.Подтвердить DNS-записи своего домена,
предложенные визардом (может потребоваться указать A-запись).Всё
остальное система сделает автоматически. Сначала она создаст CDN-
ресурс, где в качестве персонального домена используется указанный
домен, а в качестве origin — IP-адрес, подтверждённый или указанный
пользователем в A-записи.Затем создаст DNS-зону, через которую будет
работать созданный CDN-ресурс, и добавит в неё подтверждённые или
указанные пользователем DNS-записи. Для созданной A-записи система
выполнит интеграцию CDN и в качестве домена укажет cl-hash зону
клиента.По окончании работ пользователь получит инструкцию, с которой
он сможет обратиться к своему регистратору доменных имён для замены
текущих namerservers на наши. В результате будет создан CDN-ресурс,
полностью проксирующийся через созданную и делегированную нам DNS-
зону, а пользователю для этого не придётся писать ни единой строчки
кода.Дополнительные преимущества интеграции CDN с DNS-
хостингомПростотой подключения всё не ограничилось. Направление
трафика через нашу сеть открывает для владельцев сайтов и другие
преимущества:Кешироваться и доставляться быстрее будут все компоненты
сайта: не только статический, но и динамический контент.Статический и
динамический контент сайта будет защищен от DDoS-атак благодаря нашей
сети кэширующих серверов (на уровне L3, L4)Помимо того, благодаря
возможностям нашей сети посетители ресурса будут получать к нему
доступ по протоколу HTTP/2 и защищенному SSL-соединению. Причём, это
будет возможно даже если веб-сервер не будет иметь установленного SSL-
сертификата и поддерживать HTTP/2.Так интеграция с DNS-хостингом
позволила нам не только предложить владельцам веб-ресурсов самый
простой способ подключения CDN к сайтам, но и дать им дополнительные
преимущества от её использования. Чтобы не верить нам на слово, все
преимущества нашей CDN вы можете опробовать самостоятельно. Тем более,
что это можно сделать бесплатно. Помимо сети доставки контента, мы
предлагаем пользователям и другие решения, в числе которых хранилище,
защита от DDoS и облако с виртуальными машинами и серверами bare
metal. В их развитии нам помогают технологии Intel: в 2021 году мы
одними из первых в мире начали интеграцию Intel Xeon Scalable 3-го
поколения (Ice Lake) в серверную инфраструктуру своих облачных
сервисов. Ознакомиться с полный списком наших решений можно на этой
странице.
