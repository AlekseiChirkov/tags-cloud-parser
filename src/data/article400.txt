Автор: TubeAmpCat
Дата: 2021-09-30T13:00:03.000Z
Название: MFOS Echo Rockit — простой, но могучий аналоговый синтезатор
Теги: Блог компании Timeweb, DIY или Сделай сам, Звук, Электроника для
начинающих
Текст:
Привет, Хабр! Два с половиной года назад я наконец, собрала это
удивительное устройство, которое можно назвать и электромузыкальной
игрушкой, и звуковым эффектом, и просто примером электронного прибора,
разработанного с любовью и знанием дела.    Особенный интерес этот lo-
fi noise box представляет потому, что осуществляет не только привычные
всем знакомым с субтрактивным аналоговым синтезом модуляцию амплитуды,
частоты и частотного спектра сигнала, но и его модулированную задержку
во времени, что предоставляет поистине безграничные возможности
музыкального и шумового (art of noise) творчества при крошечном числе
модулей, составляющих синтезатор.  Базовыми модулями классического
аналогового синтезатора являются VCO, (voltage controlled
oscillators), — тон-генераторы сигналов разной формы, (меандр, пила,
треугольник, импульсы разной скважности), VСF, (voltage controlled
filters), — активные фильтры, изменяющие гармонический состав сигнала,
VСА, (voltage controlled amplifiers), — усилители с управляемым
коэффициентом усиления, они же модуляторы, изменяющие амплитуду
сигнала во времени. Параметры всех этих модулей управляются
напряжениями, формируемыми LFO, (low frequency oscillators), —
генераторами малой частоты, ADSR, (attack, decay, sustain, release), —
генераторами огибающей (envelope) с заданными атакой, затуханием,
сустейном и послезвучанием, и секвенсорами, запоминающими и
воспроизводящими значения напряжений для получения звуковысотной
ритмической последовательности во времени, то есть, мелодии. Так как у
архаичных аналоговых секвенсоров было малое количество шагов, речь шла
скорее о риффах.    Echo Rock it можно перевести как «Эхо ракета»,
«Эхо зажигай», или «Эхо раскачай». Такой каламбур от обладателя
искромётного юмора, замечательного человека, талантливого инженера и
музыканта Рэя Уилсона. Это не шотландский Рэй Уилсон, гитарист группы
Genesis, а американский Рэй Уилсон, композитор электронной музыки и
создатель аналоговых синтезаторов, к сожалению, ушедший от нас в 2016
году. Music From Outer Space, сокращённо MFOS, Музыка из Дальнего
Космоса, — это созданный им огромный и поистине волшебный проект.
Что же такое Echo Rockit? Это продукт творческого изучения цифровой
линии задержки аудиосигнала PT2399, представляющей собой почти не
нуждающуюся в обвязке очень массовую и доступную микросхему,
предназначенную изначально для музыкальных центров с караоке,
электронных игрушек и прочего lo-fi применения, хотя встречалась и в
микшерных пультах. Засветилась эта прекрасная микросхема и в гитарных
педалях, в том числе, отечественных, но сегодня речь не о них.
Микросхема PT2399    Как нетрудно догадаться по префиксу маркировки,
чип PT2399 разработан тайваньской корпорацией Princeton Technology. В
16-ногом корпусе расположены аналого-цифровой и цифро-аналоговый
преобразователи, 44 килобита оперативной памяти, генератор,
тактирующий запись и чтение этой памяти, частота которого зависит от
тока с управляющего вывода на землю, а также 4 операционных усилителя,
2 из которых используются в АЦП и ЦАП, а ещё 2 предназначены для
построения активных фильтров, формирующих частотную характеристику
задержанного сигнала.    То есть, на этом чипе можно построить дилей,
ревербератор или расширитель стереобазы, используя только небольшое
число пассивных компонентов, — конденсаторов и резисторов, без
необходимости городить что-то с применением дополнительных
транзисторов и микросхем.   С другой стороны, подключив к управляющему
выводу вместо переменного резистора для регулировки тактовой частоты,
и соответственно времени задержки, ИТУН, то есть, источник тока,
управляемый напряжением, на транзисторе и операционном усилителе,
можно модулировать время задержки, чем создавать интересные искажения
задержанного сигнала, ведь запись и чтение памяти чипа станут
происходить то быстрее, то медленнее. Чуть забегая вперёд, именно так
и поступил Рэй Уилсон в своём Echo Rockit.     Микросхема не
предоставляет возможности отключить встроенный тактовый генератор и
тактироваться от внешнего сигнала. Более того, встречаются рассказы о
том, что если этот генератор всё же остановился вследствие выхода
управляющего сопротивления из рабочего диапазона, PT2399, по крайней
мере, в некоторых исполнениях, начинал потреблять избыточный ток, чем
выводил из строя цепи питания. Сам при этом вроде как не сгорал, и
после устранения неисправностей работал как ни в чём не бывало. Лично
я не пробовала останавливать тактовый генератор.   Зато выход
тактирующего сигнала на 5-й ноге корпуса имеется. В большинстве
случаев он никак не используется и висит в воздухе, но мы можем подать
тактовый сигнал на вход микроконтроллера, и таким образом точно знать
время задержки. Регулируя посредством ИТУН ток управляющего вывода,
микроконтроллер сможет устанавливать нужное время задержки
аудиосигнала, что пригодится, например, для функции Tap Tempo. Это
когда темпом нажатий на педаль задаётся темп повторений задержанного
сигнала или, например, вибрато.   Решения на базе PT2399 это не
хайфай, не топовые примочки от Eventide или Strymon и не реальный
пружинный ревербератор. Но искусство формировать звучание
инструментальной и электронной музыки состоит как раз не в точном
воспроизведении, а в искажении сигнала согласно художественному
замыслу. Потому к PT2399, ставшему уже классическим артефактом старого
олдскульного lo-fi железа, обращаются и будут обращаться желающие
создать кастомные звуковые эффекты, и простые, и сложные.  Блок-схема
синтезатора  Кроме цифровой линии задержки с регулировкой громкости и
затухания повторов задержанного сигнала, времени задержки и глубины
его модуляции, способ осуществления которой мы только что рассмотрели,
MFOS Echo Rockit Рэя Уилсона содержит следующие модули.     Во-первых,
генератор этой самой модуляции, с регулировкой её частоты и
переключателем диапазонов — быстрой и медленной, и двумя выходами,
сигналов прямоугольной (меандра) и треугольной формы. Меандр — это
пульсация включено-выключено, а треугольник — плавное нарастание и
плавный спад.   Во-вторых, предусилитель входного сигнала с
коэффициентом усиления 51. Он пригодится, если будем включать на вход
эффекта микрофон.   В-третьих, ещё один генератор меандра, сигнал
которого можно подать на вход эффекта, и таким образом создавать
разные звуки и шумы автономно, не нуждаясь во входном сигнале.   Чтобы
игрушка была совсем автономной, я добавила к конструкции своей версии
динамик, и к нему простейший оконечный усилитель на LM386, а ещё
литиевый аккумулятор, контроллер его зарядки от USB и повышающий
преобразователь на 9 вольт, причём дешёвый низкочастотный, привносящий
шумы. Для lo-fi-ного дебоша самое то, всё как надо. Рептилоидные
эффекты Strymon и к ним блоки питания Zuma — это из другой Вселенной.
Но самый смак Эхо Ракеты — шикарный управляемый напряжением фильтр
низких частот, по-английски VCF — voltage controlled filter, на
настоящем бутиковом сдвоенном транскондуктивном операционном усилителе
LM13700. Фильтр снабжён регулировкой добротности, и может быть введён
в резонанс вплоть до самовозбуждения. Иными словами, превратиться в
генератор синусоидального сигнала.   Питаться синтезатор может от
9-вольтовой батарейки «Крона» или двухполярного источника +-5 вольт.
Краткий разбор принципиальной схемы    Рассмотрим назначение каждого
операционного усилителя в схеме и некоторых компонентов, ключевых для
понимания её работы.  U1-A инвертирует и усиливает напряжение,
управляющее частотой среза фильтра, поступающее с регулятора R13 и
входов внешнего управления X5 и X6. U1-B снова инвертирует и усиливает
это напряжение, а также сдвигает его посредством смещения с плюса
питания через резистор R20. U1-C — микрофонный предусилитель с
коэффициентом усиления 51. U4 — сдвоенный транскондуктивный ОУ LM13700
с изменяемым коэффициентом усиления. На нём построен двухполюсный
управляемый напряжением фильтр нижних частот. Полевые транзисторы с
управляющим переходом (JFET) Q1 и Q2 служат в качестве буферов с
высоким входным сопротивлением для сигналов с интегрирующих
конденсаторов фильтра C19 и C20, чтобы низкое входное сопротивление
транзисторов Дарлингтона, встроенных в микросхему U4, не создавало
искажений, препятствующих резонансу фильтра.  U5 — цифровая линия
задержки (ЦЛЗ) PT2399. U2 — стабилизатор её питания 5 вольт. R30 —
переменный резистор, регулирующий уровень сигнала, возвращаемого с
выхода ЦЛЗ на её вход, то есть, уровень затухания повторений сигнала.
U1-D вместе с Q3 образует ИТУН, регулирующий управляющий ток тактового
генератора ЦЛЗ. Q3 включен эмиттерным повторителем, его нагрузка R55 —
токовый шунт. Как полагается операционному усилителю, U1-D
устанавливает на выходе такой ток, чтобы напряжения на его
инвертирующем и неинвертирующем входах сравнялись. D1 параллельно
эмиттерному переходу защищает его от перенапряжения и избыточного
тока. На U5-A и U5-B собран мультивибратор — генератор модуляции.
Треугольный сигнал снимается с времязадающего конденсатора C22, меандр
— с выхода ОУ U5-B. Для получения нижнего частотного диапазона,
параллельно C22 включается C21.  U5-D служит буфером-повторителем,
формирующим отдельную среднюю точку, она же виртуальная земля для
модулятора и генератора входного сигнала. Последний собран на U5-C и
является простым мультивибратором на одном операционном усилителе.
Технические подробности на английском языке можно изучить на авторском
сайте Рэя Уилсона. Там можно скачать файлы для самостоятельного
изготовления двусторонней платы фоторезистом или лазерно-утюжным
методом, как сделала я, либо купить заводские печатные платы с
паяльной маской и шелкографией. К некоторым проектам Music From Outer
Space на сайте можно приобрести и наборы компонентов.  Примеры звуков
и принципы их получения  А мы с вами сейчас послушаем и посмотрим на
экране анализатора частотного спектра, что может эта волшебная
коробочка с крутилками и переключателями, и как они взаимодействуют
между собой.    Для начала, отключим модуляцию и послушаем сигнал с
мультивибратора. Это самый обычный меандр, с частотой от единиц герц
до нескольких килогерц. Когда частота среза фильтра на максимуме, а
добротность на минимуме, он практически ничего не срезает и не
резонирует, то есть, как бы выключен. На графике спектра видим
свойственное меандру преобладание нечётных гармоник. Такой тембр
большинство слушателей сочтёт грубым, неблагозвучным.     Добавляем
резонанс до максимума, получаем еле слышимый высокочастотный шорох.
Снижаем частоту среза, слышим синусоидальный сигнал. Хоть он и не
идеально чист, его частотный спектр сильно отличается от меандра,
(гораздо меньшим уровнем гармоник, особенно нечётных), что очень
заметно на слух.     Убираем входные импульсы, самовозбуждение
резонансного фильтра остаётся.      Частоту среза можно изменять не
только крутя ручку, но и с генератора модуляции. Изменяем частоту и
глубину модуляции. Получаем дроны, сирены и другие шумовые эффекты.
Это работает и при отсутствии входного сигнала, импульсы которого
осуществляют принудительное возбуждение колебаний и подмешиваются на
выход ниже частоты среза, и при его наличии.      Изменяя добротность
колебательной системы, можно получить очень прикольные стуки и свисты,
звонкие и приглушённые, имитирующие звучание предметов и поверхностей
из разных материалов. К вопросу о том, влияет ли дерево или, например,
материал порожка на колебания закрепленной на нём струны
электрогитары.     Изменяя настройки генератора, модулятора и фильтра,
можно получить разные шумы и трели.     Далее переходим к цифровой
линии задержки. Для начала, отключим повторы и модуляцию, и послушаем,
как звучит эхо с разным временем задержки. Добавляем повторы. Включаем
модуляцию времени задержки.      Это то же самое, как изменение
скорости магнитной ленты или виниловой пластинки. Но здесь изменяется
не только скорость чтения, но и скорость записи, что позволяет
получить очень широкий спектр эффектов.     И наконец, сочетание
модуляции фильтра и линии задержки, в котором интерферируют временные
параметры генератора, модулятора и дилея, создаёт просто безграничную
гамму возможностей. Например, имитацию звука шагов или бега, голосов
различных живых существ и механизмов.     Кроме встроенного
мультивибратора, источником входного сигнала может быть микрофон,
электрогитара, любой синтезированный или записанный звук. Эти
возможности продемонстрирую в одном из следующих видео.  Вариант
конструктивного исполнения    Напоследок посмотрим конструкцию моего
«колхозного» варианта. Корпус от DVD-плеера, фальшпанель из
пластикового плинтуса. Так как корпус ниже плинтуса, плинтус подрезан.
Декаль лицевой панели с сайта распечатан на лазерном принтере, далее
разрисован акварелью и закрыт оргстеклом. Этот акварельный рисунок —
единственный красивый элемент во всём дизайне моей поделки.
Монтажные провода из витой пары, всё как не надо делать. Это хотя бы
старая витая пара из натуральной меди, тогда как среди более новых
попадаются жилы, которые не поддаются лужению от слова совсем. Их и не
надо лудить. Надо пользоваться нормальным многожильным медным
монтажным проводом в разноцветной изоляции. Желательно МГШВ — с
шёлковой оплёткой под виниловой изоляцией. Оплётка создаёт
дополнительную надёжность, на случай, если винил растрескается или
оплавится.     Двусторонняя плата лазерно-утюжным способом — то ещё
сомнительное развлечение. Лучше взять и заказать из Америки готовую,
красивую, с паяльной маской, металлизацией переходных отверстий и
подписанными посадочными местами. А ещё, это поддержит наследников
маэстро Рэя, и в частности, продолжение работы прекрасного сайта с его
проектами.     Благодарю за внимание! В скором времени планируются ещё
видео и статьи на тему самодельных музыкальных и шумовых эффектов.
